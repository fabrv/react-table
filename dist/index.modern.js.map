{"version":3,"file":"index.modern.js","sources":["../src/index.js"],"sourcesContent":["import React, { Component } from 'react'\n\nexport class TableComponent extends Component {\n  filterValues = {}\n  state = {\n    sortValues: {}\n  }\n\n  constructor(props) {\n    super(props)\n\n    this.columns = this.columnsObject(this.props.columns, this.props.data)\n    this.pages = typeof this.props.pages === 'number' ? this.props.pages : 0\n    this.handleFilter = this.handleFilter.bind(this)\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.columns !== this.props.columns) {\n      this.columns = this.columnsObject(this.props.columns, this.props.data)\n    }\n    if (prevProps.pages !== this.props.pages) {\n      this.pages = typeof this.props.pages === 'number' ? this.props.pages : 0\n    }\n  }\n\n  columnsObject(prop, data) {\n    const obj = prop || Object.keys(data[0])\n    if (typeof obj[0] === 'string') {\n      return obj.map((column) => ({\n        caption: column,\n        filterComponent: null\n      }))\n    } else {\n      return obj\n    }\n  }\n\n  handleCellClick(row, column, value, target) {\n    const payload = {\n      row: row,\n      column: column,\n      value: value,\n      target: target\n    }\n\n    if (this.props.onCellClick) {\n      this.props.onCellClick(payload)\n    }\n  }\n\n  handlePageClick(page) {\n    if (this.props.onPageClick) {\n      this.props.onPageClick(page)\n    }\n  }\n\n  handleNextPageClick() {\n    if (this.props.onNextPageClick) {\n      this.props.onNextPageClick()\n    }\n  }\n\n  handlePreviousPageClick() {\n    if (this.props.onPreviousPageClick) {\n      this.props.onPreviousPageClick()\n    }\n  }\n\n  handleFilter(value, id) {\n    this.filterValues[id] = {\n      value: value\n    }\n\n    if (this.props.onFilterChange) {\n      this.props.onFilterChange(this.filterValues)\n    }\n  }\n\n  handleSort(id) {\n    const val = this.state.sortValues[id]?.value\n    const sortValue = {}\n    sortValue[id] = { value: val ? (val + 1) % 3 : 1 }\n\n    this.setState({\n      sortValues: sortValue\n    })\n\n    if (this.props.onSortChange) {\n      this.props.onSortChange(sortValue)\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <table className={this.props.className} style={this.props.style}>\n          <thead>\n            <tr>\n              {this.columns.map((column, index) => (\n                <th\n                  onClick={(e) => {\n                    this.handleCellClick(0, index, column.caption, e.target)\n                  }}\n                  key={index}\n                  scope='col'\n                >\n                  <span\n                    onClick={(_) => {\n                      if (column.sortable) this.handleSort(column.id)\n                    }}\n                    style={column.sortable ? { cursor: 'pointer' } : null}\n                  >\n                    {column.caption}\n                  </span>\n                  {this.state.sortValues[column.id]?.value === 1 ? ' ▴' : null}\n                  {this.state.sortValues[column.id]?.value === 2 ? ' ▾' : null}\n                  {column.filterComponent ? (\n                    <column.filterComponent\n                      setFilter={(value) => {\n                        this.handleFilter(value, column.id || 'search')\n                      }}\n                    />\n                  ) : null}\n                </th>\n              ))}\n            </tr>\n          </thead>\n\n          <tbody>\n            {this.props.data\n              .map((val) => Object.values(val))\n              .map((row, rIndex) => (\n                <tr key={rIndex}>\n                  {row.map((cell, cIndex) => (\n                    <td\n                      onClick={(e) =>\n                        this.handleCellClick(rIndex, cIndex, cell, e.target)\n                      }\n                      key={cIndex}\n                    >\n                      {cell}\n                    </td>\n                  ))}\n                </tr>\n              ))}\n          </tbody>\n        </table>\n        {this.props.pagination ? (\n          <ul className='pagination'>\n            {this.props.showPrevious ? (\n              <li className='page-item'>\n                <button\n                  onClick={() => this.handlePreviousPageClick()}\n                  className='btn btn-link'\n                >\n                  &lt;\n                </button>\n              </li>\n            ) : (\n              ''\n            )}\n            {[...new Array(this.pages)].map((_, index) => (\n              <li className='page-item' key={index}>\n                <button\n                  onClick={() => this.handlePageClick(index + 1)}\n                  className='btn btn-link'\n                >\n                  {index + 1}\n                </button>\n              </li>\n            ))}\n            {this.props.showNext ? (\n              <li className='page-item'>\n                <button\n                  onClick={() => this.handleNextPageClick()}\n                  className='btn btn-link'\n                >\n                  &gt;\n                </button>\n              </li>\n            ) : (\n              ''\n            )}\n          </ul>\n        ) : (\n          ''\n        )}\n      </div>\n    )\n  }\n}\n"],"names":["TableComponent","Component","constructor","props","filterValues","state","sortValues","columns","columnsObject","data","pages","handleFilter","bind","componentDidUpdate","prevProps","prop","obj","Object","keys","map","column","caption","filterComponent","handleCellClick","row","value","target","payload","onCellClick","handlePageClick","page","onPageClick","handleNextPageClick","onNextPageClick","handlePreviousPageClick","onPreviousPageClick","id","onFilterChange","handleSort","val","sortValue","setState","onSortChange","render","className","style","index","e","_","sortable","cursor","values","rIndex","cell","cIndex","pagination","showPrevious","Array","showNext"],"mappings":"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"}