{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import React, { Component } from 'react'\n\nexport class TableComponent extends Component {\n  filterValues = {}\n\n  constructor(props) {\n    super(props)\n\n    this.columns = this.columnsObject(this.props.columns, this.props.data)\n\n    this.pages = typeof this.props.pages === 'number' ? this.props.pages : 0\n\n    this.handleFilter = this.handleFilter.bind(this)\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.columns !== this.props.columns) {\n      this.columns = this.columnsObject(this.props.columns, this.props.data)\n    }\n    if (prevProps.pages !== this.props.pages) {\n      this.pages = typeof this.props.pages === 'number' ? this.props.pages : 0\n    }\n  }\n\n  columnsObject(prop, data) {\n    const obj = prop || Object.keys(data[0])\n    if (typeof obj[0] === 'string') {\n      return obj.map((column) => ({\n        caption: column,\n        filterComponent: null\n      }))\n    } else {\n      return obj\n    }\n  }\n\n  handleCellClick(row, column, value, target) {\n    const payload = {\n      row: row,\n      column: column,\n      value: value,\n      target: target\n    }\n\n    if (this.props.onCellClick) {\n      this.props.onCellClick(payload)\n    }\n  }\n\n  handlePageClick(page) {\n    if (this.props.onPageClick) {\n      this.props.onPageClick(page)\n    }\n  }\n\n  handleNextPageClick() {\n    if (this.props.onNextPageClick) {\n      this.props.onNextPageClick()\n    }\n  }\n\n  handlePreviousPageClick() {\n    if (this.props.onPreviousPageClick) {\n      this.props.onPreviousPageClick()\n    }\n  }\n\n  handleFilter(value, id) {\n    this.filterValues[id] = {\n      value: value\n    }\n    console.log(this.filterValues)\n  }\n\n  render() {\n    return (\n      <div>\n        <table className={this.props.className} style={this.props.style}>\n          <thead>\n            <tr>\n              {this.columns.map((column, index) => (\n                <th\n                  onClick={(e) =>\n                    this.handleCellClick(0, index, column.caption, e.target)\n                  }\n                  key={index}\n                  scope='col'\n                >\n                  {column.caption}\n                  {column.filterComponent ? (\n                    <column.filterComponent\n                      setFilter={(value) => {\n                        this.handleFilter(value, column.filterId || 'search')\n                      }}\n                    />\n                  ) : null}\n                </th>\n              ))}\n            </tr>\n          </thead>\n\n          <tbody>\n            {this.props.data\n              .map((val) => Object.values(val))\n              .map((row, rIndex) => (\n                <tr key={rIndex}>\n                  {row.map((cell, cIndex) => (\n                    <td\n                      onClick={(e) =>\n                        this.handleCellClick(rIndex, cIndex, cell, e.target)\n                      }\n                      key={cIndex}\n                    >\n                      {cell}\n                    </td>\n                  ))}\n                </tr>\n              ))}\n          </tbody>\n        </table>\n        {this.props.pagination ? (\n          <ul className='pagination'>\n            {this.props.showPrevious ? (\n              <li className='page-item'>\n                <button\n                  onClick={() => this.handlePreviousPageClick()}\n                  className='btn btn-link'\n                >\n                  &lt;\n                </button>\n              </li>\n            ) : (\n              ''\n            )}\n            {[...new Array(this.pages)].map((_, index) => (\n              <li className='page-item' key={index}>\n                <button\n                  onClick={() => this.handlePageClick(index + 1)}\n                  className='btn btn-link'\n                >\n                  {index + 1}\n                </button>\n              </li>\n            ))}\n            {this.props.showNext ? (\n              <li className='page-item'>\n                <button\n                  onClick={() => this.handleNextPageClick()}\n                  className='btn btn-link'\n                >\n                  &gt;\n                </button>\n              </li>\n            ) : (\n              ''\n            )}\n          </ul>\n        ) : (\n          ''\n        )}\n      </div>\n    )\n  }\n}\n"],"names":["TableComponent","props","filterValues","columns","columnsObject","data","pages","handleFilter","bind","componentDidUpdate","prevProps","prop","obj","Object","keys","map","column","caption","filterComponent","handleCellClick","row","value","target","payload","onCellClick","handlePageClick","page","onPageClick","handleNextPageClick","onNextPageClick","handlePreviousPageClick","onPreviousPageClick","id","console","log","render","React","className","style","index","e","filterId","val","values","rIndex","cell","cIndex","pagination","showPrevious","Array","_","showNext","Component"],"mappings":"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"}