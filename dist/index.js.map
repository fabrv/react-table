{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import React, { Component } from 'react'\n\nexport class TableComponent extends Component {\n  filterValues = {}\n  state = {\n    sortValues: {}\n  }\n\n  constructor(props) {\n    super(props)\n\n    this.columns = this.columnsObject(this.props.columns, this.props.data)\n\n    this.pages = typeof this.props.pages === 'number' ? this.props.pages : 0\n\n    this.handleFilter = this.handleFilter.bind(this)\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.columns !== this.props.columns) {\n      this.columns = this.columnsObject(this.props.columns, this.props.data)\n    }\n    if (prevProps.pages !== this.props.pages) {\n      this.pages = typeof this.props.pages === 'number' ? this.props.pages : 0\n    }\n  }\n\n  columnsObject(prop, data) {\n    const obj = prop || Object.keys(data[0])\n    if (typeof obj[0] === 'string') {\n      return obj.map((column) => ({\n        caption: column,\n        filterComponent: null\n      }))\n    } else {\n      return obj\n    }\n  }\n\n  handleCellClick(row, column, value, target) {\n    const payload = {\n      row: row,\n      column: column,\n      value: value,\n      target: target\n    }\n\n    if (this.props.onCellClick) {\n      this.props.onCellClick(payload)\n    }\n  }\n\n  handlePageClick(page) {\n    if (this.props.onPageClick) {\n      this.props.onPageClick(page)\n    }\n  }\n\n  handleNextPageClick() {\n    if (this.props.onNextPageClick) {\n      this.props.onNextPageClick()\n    }\n  }\n\n  handlePreviousPageClick() {\n    if (this.props.onPreviousPageClick) {\n      this.props.onPreviousPageClick()\n    }\n  }\n\n  handleFilter(value, id) {\n    this.filterValues[id] = {\n      value: value\n    }\n\n    if (this.props.onFilterChange) {\n      this.props.onFilterChange(this.filterValues)\n    }\n  }\n\n  handleSort(id) {\n    const val = this.state.sortValues[id]?.value\n    const sortValue = {}\n    sortValue[id] = { value: val ? (val + 1) % 3 : 1 }\n\n    this.setState({\n      sortValues: sortValue\n    })\n\n    if (this.props.onSortChange) {\n      this.props.onSortChange(sortValue)\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <table className={this.props.className} style={this.props.style}>\n          <thead>\n            <tr>\n              {this.columns.map((column, index) => (\n                <th\n                  onClick={(e) => {\n                    this.handleCellClick(0, index, column.caption, e.target)\n                  }}\n                  key={index}\n                  scope='col'\n                >\n                  <span\n                    onClick={(_) => {\n                      if (column.sortable) this.handleSort(column.id)\n                    }}\n                    style={column.sortable ? { cursor: 'pointer' } : null}\n                  >\n                    {column.caption}\n                  </span>\n                  {this.state.sortValues[column.id]?.value === 1 ? ' ▴' : null}\n                  {this.state.sortValues[column.id]?.value === 2 ? ' ▾' : null}\n                  {column.filterComponent ? (\n                    <column.filterComponent\n                      setFilter={(value) => {\n                        this.handleFilter(value, column.id || 'search')\n                      }}\n                    />\n                  ) : null}\n                </th>\n              ))}\n            </tr>\n          </thead>\n\n          <tbody>\n            {this.props.data\n              .map((val) => Object.values(val))\n              .map((row, rIndex) => (\n                <tr key={rIndex}>\n                  {row.map((cell, cIndex) => (\n                    <td\n                      onClick={(e) =>\n                        this.handleCellClick(rIndex, cIndex, cell, e.target)\n                      }\n                      key={cIndex}\n                    >\n                      {cell}\n                    </td>\n                  ))}\n                </tr>\n              ))}\n          </tbody>\n        </table>\n        {this.props.pagination ? (\n          <ul className='pagination'>\n            {this.props.showPrevious ? (\n              <li className='page-item'>\n                <button\n                  onClick={() => this.handlePreviousPageClick()}\n                  className='btn btn-link'\n                >\n                  &lt;\n                </button>\n              </li>\n            ) : (\n              ''\n            )}\n            {[...new Array(this.pages)].map((_, index) => (\n              <li className='page-item' key={index}>\n                <button\n                  onClick={() => this.handlePageClick(index + 1)}\n                  className='btn btn-link'\n                >\n                  {index + 1}\n                </button>\n              </li>\n            ))}\n            {this.props.showNext ? (\n              <li className='page-item'>\n                <button\n                  onClick={() => this.handleNextPageClick()}\n                  className='btn btn-link'\n                >\n                  &gt;\n                </button>\n              </li>\n            ) : (\n              ''\n            )}\n          </ul>\n        ) : (\n          ''\n        )}\n      </div>\n    )\n  }\n}\n"],"names":["TableComponent","props","filterValues","state","sortValues","columns","columnsObject","data","pages","handleFilter","bind","componentDidUpdate","prevProps","prop","obj","Object","keys","map","column","caption","filterComponent","handleCellClick","row","value","target","payload","onCellClick","handlePageClick","page","onPageClick","handleNextPageClick","onNextPageClick","handlePreviousPageClick","onPreviousPageClick","id","onFilterChange","handleSort","val","sortValue","setState","onSortChange","render","React","className","style","index","e","_","sortable","cursor","values","rIndex","cell","cIndex","pagination","showPrevious","Array","showNext","Component"],"mappings":"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"}